(function(e){function t(t){for(var o,c,i=t[0],l=t[1],s=t[2],d=0,b=[];d<i.length;d++)c=i[d],Object.prototype.hasOwnProperty.call(r,c)&&r[c]&&b.push(r[c][0]),r[c]=0;for(o in l)Object.prototype.hasOwnProperty.call(l,o)&&(e[o]=l[o]);u&&u(t);while(b.length)b.shift()();return a.push.apply(a,s||[]),n()}function n(){for(var e,t=0;t<a.length;t++){for(var n=a[t],o=!0,i=1;i<n.length;i++){var l=n[i];0!==r[l]&&(o=!1)}o&&(a.splice(t--,1),e=c(c.s=n[0]))}return e}var o={},r={app:0},a=[];function c(t){if(o[t])return o[t].exports;var n=o[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,c),n.l=!0,n.exports}c.m=e,c.c=o,c.d=function(e,t,n){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},c.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(c.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)c.d(n,o,function(t){return e[t]}.bind(null,o));return n},c.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],l=i.push.bind(i);i.push=t,i=i.slice();for(var s=0;s<i.length;s++)t(i[s]);var u=l;a.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"1fa8":function(e,t,n){},"34c6":function(e,t,n){},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d"),n("99af");var o=n("7a23");function r(e,t){var n=Object(o["E"])("router-view");return Object(o["x"])(),Object(o["d"])(n)}var a=n("6b0d"),c=n.n(a);const i={},l=c()(i,[["render",r]]);var s=l,u=n("9483");Object(u["a"])("".concat("/","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered:function(){console.log("Service worker has been registered.")},cached:function(){console.log("Content has been cached for offline use.")},updatefound:function(){console.log("New content is downloading.")},updated:function(){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(e){console.error("Error during service worker registration:",e)}});var d=n("6c02"),b=(n("a15b"),{class:"flex justify-center"}),m={class:"mb-3 xl:w-96"},f={class:"text-5xl font-medium leading-tight mt-0 mb-2 text-blue-600"},g=Object(o["g"])("h2",{class:"text-3xl font-medium leading-tight mt-0 mb-2 text-blue-600"}," Home ",-1),j=Object(o["g"])("label",{class:"form-label inline-block mb-2 text-gray-700 text-xl"}," Name ",-1),p=Object(o["g"])("div",{class:"error-msg"},"Enter a valid player name",-1),O=[p],h=["disabled"],v=Object(o["g"])("label",{class:"form-label inline-block mb-2 text-gray-700 text-xl"}," Room-id ",-1),y=Object(o["g"])("div",{class:"error-msg"},"Enter a six digit room numbers",-1),x=[y],k=["disabled"];function w(e,t,n,r,a,c){return Object(o["x"])(),Object(o["f"])("div",b,[Object(o["g"])("div",m,[Object(o["g"])("h1",f," PartyHub "+Object(o["G"])(e.$route.params.id),1),g,Object(o["g"])("div",null,[j,Object(o["g"])("div",{class:Object(o["r"])({error:r.v$.playerName.$errors.length})},[Object(o["M"])(Object(o["g"])("input",{"onUpdate:modelValue":t[0]||(t[0]=function(e){return a.playerName=e}),required:"",maxlength:"64",minlength:"1",ref:"playerNameInput",class:"form-control block w-full px-3 py-1.5 text-base font-normal text-gray-700 bg-white bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none"},null,512),[[o["K"],a.playerName]]),(Object(o["x"])(!0),Object(o["f"])(o["a"],null,Object(o["D"])(r.v$.playerName.$errors,(function(e){return Object(o["x"])(),Object(o["f"])("div",{class:"input-errors",key:e.$uid},O)})),128))],2)]),Object(o["g"])("button",{onClick:t[1]||(t[1]=function(){return c.host&&c.host.apply(c,arguments)}),disabled:""==a.playerName,class:"inline-block px-6 w-full py-2 border-2 border-blue-600 text-blue-600 font-medium text-xs leading-tight uppercase rounded hover:bg-black hover:bg-opacity-5 focus:outline-none focus:ring-0 transition duration-150 ease-in-out"}," Host ",8,h),Object(o["g"])("div",null,[v,Object(o["g"])("div",{class:Object(o["r"])({error:r.v$.roomId.$errors.length})},[Object(o["M"])(Object(o["g"])("input",{"onUpdate:modelValue":t[2]||(t[2]=function(e){return a.roomId=e}),type:"text",pattern:"^\\d{1,6}$",placeholder:"123456",class:"form-control block w-full px-3 py-1.5 text-base font-normal text-gray-700 bg-white bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none"},null,512),[[o["K"],a.roomId]]),(Object(o["x"])(!0),Object(o["f"])(o["a"],null,Object(o["D"])(r.v$.roomId.$errors,(function(e){return Object(o["x"])(),Object(o["f"])("div",{class:"input-errors",key:e.$uid},x)})),128))],2)]),Object(o["g"])("button",{onClick:t[3]||(t[3]=function(){return c.join&&c.join.apply(c,arguments)}),disabled:""==a.playerName||""==a.roomId,class:"inline-block w-full px-6 py-2.5 bg-blue-600 text-white font-medium text-xs leading-tight uppercase rounded shadow-md hover:bg-blue-700 hover:shadow-lg focus:bg-blue-700 focus:shadow-lg focus:outline-none focus:ring-0 active:bg-blue-800 active:shadow-lg transition duration-150 ease-in-out"}," Join ",8,k)])])}var G=n("1da1"),$=(n("96cf"),n("ac1f"),n("466d"),n("d3b7"),n("25f0"),n("25a0")),S=n("e3e1"),I=function(e){return e.toString().match(/(?<!\d)\d{6}(?!\d)/)},N={name:"Home",setup:function(){return{v$:Object($["a"])()}},data:function(){return{playerName:"",roomId:""}},created:function(){this.$route&&this.$route.params&&(this.roomId=this.$route.params.roomId)},methods:{host:function(){this.$socket.emit("newRoom",{playerName:this.playerName})},join:function(){var e=this;return Object(G["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.v$.$validate();case 2:if(n=t.sent,n){t.next=5;break}return t.abrupt("return");case 5:e.$socket.emit("joinRoom",{roomId:e.roomId,playerName:e.playerName});case 6:case"end":return t.stop()}}),t)})))()},joinLobby:function(e){this.$store.commit("joinRoom",e),this.$router.push("/lobby")}},sockets:{roomCreated:function(e){var t=e.roomId;this.joinLobby(t)},joinSuccess:function(e){var t=e.roomId;this.joinLobby(t)}},validations:function(){return{playerName:{required:S["a"]},roomId:{validateRoomId:I}}}};const C=c()(N,[["render",w]]);var V=C,E=(n("b0c0"),n("9911"),Object(o["g"])("h1",null,"PH",-1)),q=Object(o["g"])("div",{id:"qrcode"},null,-1),U=Object(o["g"])("a",{id:"link"},"link",-1),H=Object(o["g"])("h3",null,"Players",-1),L=["disabled"],P=["href"];function M(e,t,n,r,a,c){var i=Object(o["E"])("game-list"),l=Object(o["E"])("selected-game"),s=Object(o["E"])("VueQRCodeComponent");return Object(o["x"])(),Object(o["f"])("div",null,[E,Object(o["g"])("h2",null,"Lobby "+Object(o["G"])(c.roomId),1),q,U,Object(o["g"])("div",null,[H,Object(o["g"])("ul",null,[(Object(o["x"])(!0),Object(o["f"])(o["a"],null,Object(o["D"])(a.players,(function(e){return Object(o["x"])(),Object(o["f"])("li",{key:e.name},Object(o["G"])(e.name),1)})),128))])]),c.isHost?(Object(o["x"])(),Object(o["d"])(i,{key:0})):(Object(o["x"])(),Object(o["d"])(l,{key:1})),Object(o["g"])("button",{disabled:!c.isHost,onClick:t[0]||(t[0]=function(){return c.startGame&&c.startGame.apply(c,arguments)})},"Play",8,L),Object(o["i"])(s,{text:c.link},null,8,["text"]),Object(o["g"])("a",{href:c.link},Object(o["G"])(c.link),9,P)])}n("d81d");var R=Object(o["g"])("h3",null,"Games",-1),_={key:0};function D(e,t,n,r,a,c){var i=Object(o["E"])("game-display"),l=Object(o["E"])("Settings");return Object(o["x"])(),Object(o["f"])("div",null,[R,c.hasGames?(Object(o["x"])(),Object(o["f"])("div",_,[(Object(o["x"])(!0),Object(o["f"])(o["a"],null,Object(o["D"])(a.games,(function(e){return Object(o["x"])(),Object(o["d"])(i,{game:e,key:e.name,onSelected:t[0]||(t[0]=function(e){return c.selectGame(e)})},null,8,["game"])})),128))])):Object(o["e"])("",!0),"HOST"===a.role?(Object(o["x"])(),Object(o["d"])(l,{key:1,settings:a.settings},null,8,["settings"])):Object(o["e"])("",!0)])}n("159b"),n("b64b");function T(e,t,n,r,a,c){return Object(o["x"])(),Object(o["f"])("button",{onClick:t[0]||(t[0]=function(){return c.selectGame&&c.selectGame.apply(c,arguments)}),class:Object(o["r"])({selected:n.game.selected})},Object(o["G"])(n.game.name),3)}var J={name:"GameDisplay",props:{game:{type:Object,required:!0}},methods:{selectGame:function(){this.$emit("selected",this.game.name)}},emits:["selected"]};n("f7f8");const A=c()(J,[["render",T],["__scopeId","data-v-bc754882"]]);var K=A,B={key:0,style:{border:"4px solid red"}},F=Object(o["g"])("h3",null,"Settings",-1),Q={key:0},W=["min","max","required","onUpdate:modelValue"],z={key:1},X=["required","onUpdate:modelValue"],Y={key:2},Z=["required","onUpdate:modelValue"],ee={key:3},te=["onUpdate:modelValue","multiple"],ne=["value"];function oe(e,t,n,r,a,c){return n.settings?(Object(o["x"])(),Object(o["f"])("div",B,[F,Object(o["g"])("form",null,[(Object(o["x"])(!0),Object(o["f"])(o["a"],null,Object(o["D"])(n.settings,(function(e){return Object(o["x"])(),Object(o["f"])("div",{key:e.key,style:{border:"1px solid blue"}},["Number"==e.type?(Object(o["x"])(),Object(o["f"])("div",Q,[Object(o["h"])(Object(o["G"])(e.name)+" ",1),Object(o["g"])("label",null,Object(o["G"])(e.label),1),Object(o["M"])(Object(o["g"])("input",{type:"number",min:e.min,max:e.max,required:e.required,"onUpdate:modelValue":function(t){return e.value=t}},null,8,W),[[o["K"],e.value]])])):Object(o["e"])("",!0),"Text"==e.type||"String"==e.type?(Object(o["x"])(),Object(o["f"])("div",z,[Object(o["h"])(Object(o["G"])(e.name)+" ",1),Object(o["g"])("label",null,Object(o["G"])(e.label),1),Object(o["M"])(Object(o["g"])("input",{type:"text",required:e.required,"onUpdate:modelValue":function(t){return e.value=t}},null,8,X),[[o["K"],e.value]])])):Object(o["e"])("",!0),"Checkbox"==e.type?(Object(o["x"])(),Object(o["f"])("div",Y,[Object(o["h"])(Object(o["G"])(e.name)+" ",1),Object(o["g"])("label",null,Object(o["G"])(e.label),1),Object(o["M"])(Object(o["g"])("input",{type:"checkbox",required:e.required,"onUpdate:modelValue":function(t){return e.value=t}},null,8,Z),[[o["I"],e.value]])])):Object(o["e"])("",!0),"Select"==e.type?(Object(o["x"])(),Object(o["f"])("div",ee,[Object(o["h"])(Object(o["G"])(e.name)+" ",1),Object(o["g"])("label",null,Object(o["G"])(e.label),1),Object(o["M"])(Object(o["g"])("select",{"onUpdate:modelValue":function(t){return e.value=t},multiple:e.multiple},[(Object(o["x"])(!0),Object(o["f"])(o["a"],null,Object(o["D"])(e.options,(function(e){return Object(o["x"])(),Object(o["f"])("option",{key:e,value:e},Object(o["G"])(e),9,ne)})),128))],8,te),[[o["J"],e.value]])])):Object(o["e"])("",!0)])})),128))])])):Object(o["e"])("",!0)}var re={name:"Settings",props:{settings:{type:Object}},watch:{settings:{handler:function(){this.computedSettings()},deep:!0}},mounted:function(){},methods:{computedSettings:function(){for(var e=Object.keys(this.settings),t={},n=0,o=e;n<o.length;n++){var r=o[n];t[r]=this.settings[r].value}this.$root.gameSettings=t}}};const ae=c()(re,[["render",oe]]);var ce=ae,ie={name:"GameList",components:{GameDisplay:K,Settings:ce},data:function(){return{games:[],settings:null,role:"GUEST"}},computed:{hasGames:function(){return this.games.length>0}},methods:{refreshGameList:function(){var e=this;this.axios.get("/games").then((function(e){return e.data})).then((function(t){e.games=t.games,e.games.length>=1&&(e.selectGame(e.games[0]),e.getSettings(e.games[0].name))})).catch((function(e){return console.log(e)}))},selectGame:function(e){this.games.forEach((function(e){e.selected=!1})),e.selected=!0;var t=e.name;this.$socket.emit("selectGame",{gameName:t}),this.getSettings(t)},getSettings:function(e){var t=this;this.axios.get("/gameSettings/".concat(e)).then((function(e){return e.data})).then((function(e){for(var n=e.form,o=Object.keys(n),r=0,a=o;r<a.length;r++){var c=a[r];n[c].key=c}if(e.defaultValues)for(var i=Object.keys(e.defaultValues),l=0,s=i;l<s.length;l++){var u=s[l];e.defaultValues[u]&&(n[u].value="",n[u].value=e.defaultValues[u])}t.settings=n})).catch((function(e){return console.log(e)}))}},mounted:function(){this.refreshGameList(),this.role=this.$root.role}};const le=c()(ie,[["render",D]]);var se=le,ue=Object(o["g"])("h3",null,"Game",-1);function de(e,t,n,r,a,c){return Object(o["x"])(),Object(o["f"])("div",null,[ue,Object(o["g"])("p",null,Object(o["G"])(a.selectedGame),1)])}var be={name:"SelectedGame",data:function(){return{selectedGame:""}},sockets:{gameSelected:function(e){var t=e.gameName;this.selectedGame=t}}};const me=c()(be,[["render",de]]);var fe=me,ge=n("dfcf"),je={name:"Lobby",components:{SelectedGame:fe,GameList:se,VueQRCodeComponent:ge["a"]},data:function(){return{players:[],role:"GUEST"}},computed:{roomId:function(){return this.$store.state.roomId},isHost:function(){return"HOST"===this.role},link:function(){return"http://".concat(window.location.host,"#/join/").concat(this.roomId)}},methods:{startGame:function(){this.isHost&&this.$root.gameSettings?this.$socket.emit("startGame",this.$root.gameSettings):this.$socket.emit("startGame",{})}},sockets:{playersChanged:function(e){var t=e.playerNames;this.players=t.map((function(e){return{name:e}}))},roleChanged:function(e){this.$root.role=e.role;var t=e.role;this.role=t},gameStarted:function(e){var t=e.gameName;this.$store.commit("startGame",t),this.$router.push("/game")}}};const pe=c()(je,[["render",M]]);var Oe=pe,he=function(e){return Object(o["A"])("data-v-8d0dda34"),e=e(),Object(o["y"])(),e},ve={id:"page"},ye=he((function(){return Object(o["g"])("h1",null,"PH",-1)})),xe=["src"];function ke(e,t,n,r,a,c){return Object(o["x"])(),Object(o["f"])("div",ve,[ye,Object(o["g"])("iframe",{ref:"gameContainer",id:"gameContainer",src:c.gameUrl},null,8,xe)])}var we={name:"Game",computed:{gameUrl:function(){return"http://".concat(window.location.host,"/game/").concat(this.$store.state.gameName,"/index.html")}},methods:{addOrientationListener:function(){console.log("orientation listened"),window.DeviceOrientationEvent?window.addEventListener("deviceorientation",(function(e){var t=document.getElementById("gameContainer").contentWindow;t.postMessage({orientation:window.orientation},"*"),console.log(e)}),!1):alert("ori geht nicht")}},mounted:function(){console.log("test"),this.$refs.gameContainer.contentWindow.socket=this.$socket,this.addOrientationListener()}};n("d2f2");const Ge=c()(we,[["render",ke],["__scopeId","data-v-8d0dda34"]]);var $e=Ge,Se=[{path:"/",name:"Home",component:V},{path:"/join/:roomId",name:"Join",component:V},{path:"/lobby",name:"Lobby",component:Oe},{path:"/game",name:"Game",component:$e}],Ie=Object(d["a"])({history:Object(d["b"])("/"),routes:Se}),Ne=Ie,Ce=n("5502"),Ve=Object(Ce["a"])({state:{roomId:0,gameName:""},mutations:{joinRoom:function(e,t){e.roomId=t},startGame:function(e,t){e.gameName=t}},actions:{},modules:{}}),Ee=n("bc3a"),qe=n.n(Ee),Ue=n("130e"),He=n("eefd"),Le=n.n(He);Object(o["c"])(s).use(Ve).use(Ne).use(Ue["a"],qe.a).use(new Le.a({debug:!0,connection:"http://".concat(window.location.hostname,":").concat("3000")})).mount("#app")},d2f2:function(e,t,n){"use strict";n("34c6")},f7f8:function(e,t,n){"use strict";n("1fa8")}});
//# sourceMappingURL=app.199b58bb.js.map